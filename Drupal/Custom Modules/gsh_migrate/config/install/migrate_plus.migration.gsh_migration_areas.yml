id: gsh_migration_areas
label: 'Migrate Areas data from the csv file'
migration_group: gsh_migration
source:
  plugin: csv
  # Full path to the file.
  path: 'modules/custom/gsh_migrate/assets/csv/areas.csv'
  header_row_count: 1
  keys:
    - tid
process:
  # Adding the mapping between the fields and the csv columns.
  name: title
  tid: tid
  field_city:
    plugin: entity_lookup
    source: city
    entity_type: taxonomy_term
    bundle_key: vid
    bundle: cities
    value_key: name
  field_featured_image: featured_image
  field_intro: intro
  field_sub_title: subtitle
  description/value: term_description
  description/format:
      plugin: default_value
      default_value: "full_html"
  field_benefits:
    - plugin: explode
      delimiter: "|"
      source: fcid
    - plugin: skip_on_empty
      method: process
    - plugin: migration_lookup
      migration: gsh_migration_field_collection_benefits
      no_stub: true
    - plugin: iterator
      process:
        target_id: '0'
        target_revision_id: '1'
destination:
  plugin: 'entity:taxonomy_term'
  default_bundle: areas
migration_dependencies:
  required:
    - gsh_migration_field_collection_benefits
    - gsh_migration_cities
dependencies: { }
